kover {
    reports {
        filters {
            excludes {
                packages(
                        "io.github.sbliquibase.client.models",
                        "io.github.sbliquibase.dto.model"
                )
            }
        }
        total {
            xml {
                onCheck = true
            }
            html {
                onCheck = true
            }
        }
    }

    currentProject {
        instrumentation {
            disabledForTestTasks.add("cucumberBurp")
        }
    }
}

sonar {
    properties {
        property "sonar.coverage.jacoco.xmlReportPaths", "${rootProject.layout.buildDirectory.get().toString()}/reports/kover/report.xml"
    }
}

rootProject.tasks.named("sonar").get().dependsOn(rootProject.tasks.named("koverXmlReport").get())
rootProject.tasks.named("sonar").get().dependsOn(rootProject.tasks.named("koverHtmlReport").get())

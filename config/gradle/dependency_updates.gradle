// ------ Plugins configuration
dependencyUpdates {
    checkConstraints = true
    checkForGradleUpdate = true

    def unstableVersionKeywords = ['alpha', 'beta', 'dev', 'rc']

    // eg. 'com.fasterxml.jackson.core:jackson-annotations'
    def ignoreList = []

    rejectVersionIf {
        // improved checking: https://github.com/Vampire/setup-wsl/blob/e7457fb9ddea9c5a874c4a79e39a4961cb874c52/buildSrc/src/main/kotlin/net/kautler/versions.gradle.kts#L125
        def unstableVersion = unstableVersionKeywords.any { uk -> it.candidate.version.toLowerCase().contains(uk) }
        // reject unstable versions
        if (unstableVersion) {
            return unstableVersion
        }

        // reject blacklisted versions
        def ignoredVersion = ignoreList.any { il ->
            def dep = it.candidate.group + ':' + it.candidate.module
            return il == dep
        }

        return ignoredVersion
    }
}
